{% extends 'common/layout.html.twig' %}

{% block content %}
<div class="page-header">
  <h1>Merchants <small>Store Database</small></h1>
</div>

<div class="row">
  <div class="col-md-6">
    Total {{ merchants|length }} merchants
  </div>
  <div class="col-md-6 text-right">
    <a href="{{ path('merchant_create') }}" class="btn btn-primary">New Merchant</a>
    <p></p>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="col-md-4">Merchant Name</th>
          <th class="col-md-2">Network</th>
          <th class="col-md-1">Merchant Id</th>
          <th class="col-md-1">Top Store</th>
          <th class="col-md-1">URL</th>
          <th class="col-md-1">Logo</th>
          <th class="col-md-1">Comm.</th>
          <th class="col-md-1"></th>
        </tr>
      </thead>
      </tbody>
        {% for merchant in merchants %}
        <tr>
          <td>{{ merchant.displayName }}</td>
          <td>{% if merchant.network %}{{ merchant.network.name }}{% endif %}</td>
          <td>{{ merchant.networkMerchantId }}</td>
          <td>
            {% if merchant.topStore %}
            <i class="glyphicon glyphicon-ok text-success"></i>
            {% endif %}
          </td>
          <td>
            {% if merchant.clickoutUrl %}
            <i class="glyphicon glyphicon-ok text-success"></i>
            <a href="{{ merchant.testTrackingUrl }}" class="btn btn-default btn-xs pull-right" target="_blank">Test</a>
            {% endif %}
          </td>
          <td>
            {% if merchant.logoInvalid %}
            <i class="glyphicon glyphicon-remove text-danger"></i>
            {% elseif merchant.logoPath %}
            <i class="glyphicon glyphicon-ok text-success"></i>
            {% endif %}
          </td>
          <td>{{ merchant.commissionShareText }}</td>
          <td>
            <a href="{{ path('merchant_edit', { merchantId: merchant.id }) }}" class="btn btn-default btn-xs pull-right">Edit</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
